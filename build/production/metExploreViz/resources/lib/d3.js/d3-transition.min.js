!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("d3-selection"),require("d3-dispatch"),require("d3-timer"),require("d3-interpolate"),require("d3-color"),require("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-timer","d3-interpolate","d3-color","d3-ease"],b):b(a.d3=a.d3||{},a.d3,a.d3,a.d3,a.d3,a.d3,a.d3)}(this,function(an,aw,aF,ap,aB,av,am){function aK(c,h,f,d,b,g){var a=c.__transition;if(a){if(f in a){return}}else{c.__transition={}}aH(c,f,{name:h,index:d,group:b,on:bl,tween:ae,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:aM})}function ao(a,c){var b=a.__transition;if(!b||!(b=b[c])||b.state>aM){throw new Error("too late")}return b}function ay(a,c){var b=a.__transition;if(!b||!(b=b[c])||b.state>ac){throw new Error("too late")}return b}function aE(a,c){var b=a.__transition;if(!b||!(b=b[c])){throw new Error("too late")}return b}function aH(k,c,g){function f(a){g.state=ab,g.timer.restart(b,g.delay,g.time),g.delay<=a&&b(a-g.delay)}function b(a){var l,o,e,n;if(g.state!==ab){return h()}for(l in d){if(n=d[l],n.name===g.name){if(n.state===bq){return ap.timeout(b)}n.state===ad?(n.state=bh,n.timer.stop(),n.on.call("interrupt",k,k.__data__,n.index,n.group),delete d[l]):+l<c&&(n.state=bh,n.timer.stop(),delete d[l])}}if(ap.timeout(function(){g.state===bq&&(g.state=ad,g.timer.restart(j,g.delay,g.time),j(a))}),g.state=ac,g.on.call("start",k,k.__data__,g.index,g.group),g.state===ac){for(g.state=bq,m=new Array(e=g.tween.length),l=0,o=-1;l<e;++l){(n=g.tween[l].value.call(k,k.__data__,g.index,g.group))&&(m[++o]=n)}m.length=o+1}}function j(p){for(var e=p<g.duration?g.ease.call(null,p/g.duration):(g.timer.restart(h),g.state=bj,1),a=-1,l=m.length;++a<l;){m[a].call(null,e)}g.state===bj&&(g.on.call("end",k,k.__data__,g.index,g.group),h())}function h(){g.state=bh,g.timer.stop(),delete d[c];for(var a in d){return}delete k.__transition}var m,d=k.__transition;d[c]=g,g.timer=ap.timer(f,0,g.time)}function aC(c,h){var f,d,b,g=c.__transition,a=!0;if(g){h=null==h?null:h+"";for(b in g){(f=g[b]).name===h?(d=f.state===bq,f.state=bh,f.timer.stop(),d&&f.on.call("interrupt",c,c.__data__,f.index,f.group),delete g[b]):a=!1}a&&delete c.__transition}}function aG(a){return this.each(function(){aC(this,a)})}function au(a,d){var c,b;return function(){var g=ay(this,a),h=g.tween;if(h!==c){b=c=h;for(var f=0,e=b.length;f<e;++f){if(b[f].name===d){b=b.slice(),b.splice(f,1);break}}}g.tween=b}}function aL(b,f,d){var c,a;if("function"!=typeof d){throw new Error}return function(){var j=ay(this,b),g=j.tween;if(g!==c){a=(c=g).slice();for(var e={name:f,value:d},h=0,i=a.length;h<i;++h){if(a[h].name===f){a[h]=e;break}}h===i&&a.push(e)}j.tween=a}}function al(c,h){var f=this._id;if(c+="",arguments.length<2){for(var d,b=aE(this.node(),f).tween,g=0,a=b.length;g<a;++g){if((d=b[g]).name===c){return d.value}}return null}return this.each((null==h?au:aL)(f,c,h))}function ah(a,d,c){var b=a._id;return a.each(function(){var e=ay(this,b);(e.value||(e.value={}))[d]=c.apply(this,arguments)}),function(e){return aE(e,b).value[d]}}function ax(a,c){var b;return("number"==typeof c?aB.interpolateNumber:c instanceof av.color?aB.interpolateRgb:(b=av.color(c))?(c=b,aB.interpolateRgb):aB.interpolateString)(a,c)}function aD(a){return function(){this.removeAttribute(a)}}function aj(a){return function(){this.removeAttributeNS(a.space,a.local)}}function aJ(b,f,d){var c,a;return function(){var e=this.getAttribute(b);return e===d?null:e===c?a:a=f(c=e,d)}}function bf(b,f,d){var c,a;return function(){var e=this.getAttributeNS(b.space,b.local);return e===d?null:e===c?a:a=f(c=e,d)}}function ai(b,g,d){var c,a,f;return function(){var h,e=d(this);return null==e?void this.removeAttribute(b):(h=this.getAttribute(b),h===e?null:h===c&&e===a?f:f=g(c=h,a=e))}}function aZ(b,g,d){var c,a,f;return function(){var h,e=d(this);return null==e?void this.removeAttributeNS(b.space,b.local):(h=this.getAttributeNS(b.space,b.local),h===e?null:h===c&&e===a?f:f=g(c=h,a=e))}}function aW(a,c){var b=aw.namespace(a),d="transform"===b?aB.interpolateTransformSvg:ax;return this.attrTween(a,"function"==typeof c?(b.local?aZ:ai)(b,d,ah(this,"attr."+a,c)):null==c?(b.local?aj:aD)(b):(b.local?bf:aJ)(b,d,c))}function bc(a,c){function b(){var f=this,d=c.apply(f,arguments);return d&&function(e){f.setAttributeNS(a.space,a.local,d(e))}}return b._value=c,b}function ba(a,c){function b(){var f=this,d=c.apply(f,arguments);return d&&function(e){f.setAttribute(a,d(e))}}return b._value=c,b}function a1(b,d){var c="attr."+b;if(arguments.length<2){return(c=this.tween(c))&&c._value}if(null==d){return this.tween(c,null)}if("function"!=typeof d){throw new Error}var a=aw.namespace(b);return this.tween(c,(a.local?bc:ba)(a,d))}function aU(a,b){return function(){ao(this,a).delay=+b.apply(this,arguments)}}function ar(a,b){return b=+b,function(){ao(this,a).delay=b}}function aS(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?aU:ar)(b,a)):aE(this.node(),b).delay}function a0(a,b){return function(){ay(this,a).duration=+b.apply(this,arguments)}}function aA(a,b){return b=+b,function(){ay(this,a).duration=b}}function az(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?a0:aA)(b,a)):aE(this.node(),b).duration}function ag(a,b){if("function"!=typeof b){throw new Error}return function(){ay(this,a).ease=b}}function a2(a){var b=this._id;return arguments.length?this.each(ag(b,a)):aE(this.node(),b).ease}function aX(n){"function"!=typeof n&&(n=aw.matcher(n));for(var j=this._groups,b=j.length,g=new Array(b),c=0;c<b;++c){for(var m,k=j[c],p=k.length,d=g[c]=[],h=0;h<p;++h){(m=k[h])&&n.call(m,m.__data__,h,k)&&d.push(m)}}return new af(g,this._parents,this._name,this._id)}function a6(A){if(A._id!==this._id){throw new Error}for(var j=this._groups,v=A._groups,b=j.length,m=v.length,g=Math.min(b,m),z=new Array(b),y=0;y<g;++y){for(var B,k=j[y],q=v[y],x=k.length,p=z[y]=new Array(x),w=0;w<x;++w){(B=k[w]||q[w])&&(p[w]=B)}}for(;y<b;++y){z[y]=j[y]}return new af(z,this._parents,this._name,this._id)}function be(a){return(a+"").trim().split(/^|\s+/).every(function(b){var c=b.indexOf(".");return c>=0&&(b=b.slice(0,c)),!b||"start"===b})}function bb(b,g,d){var c,a,f=be(g)?ao:ay;return function(){var h=f(this,b),e=h.on;e!==c&&(a=(c=e).copy()).on(g,d),h.on=a}}function a9(a,c){var b=this._id;return arguments.length<2?aE(this.node(),b).on.on(a):this.each(bb(b,a,c))}function a8(a){return function(){var c=this.parentNode;for(var b in this.__transition){if(+b!==a){return}}c&&c.removeChild(this)}}function a7(){return this.on("end.remove",a8(this._id))}function a5(x){var m=this._name,a=this._id;"function"!=typeof x&&(x=aw.selector(x));for(var j=this._groups,f=j.length,w=new Array(f),y=0;y<f;++y){for(var g,q,k=j[y],n=k.length,b=w[y]=new Array(n),v=0;v<n;++v){(g=k[v])&&(q=x.call(g,g.__data__,v,k))&&("__data__" in g&&(q.__data__=g.__data__),b[v]=q,aK(b[v],m,a,v,b,aE(g,a)))}}return new af(w,this._parents,m,a)}function a4(F){var x=this._name,a=this._id;"function"!=typeof F&&(F=aw.selectorAll(F));for(var n=this._groups,f=n.length,E=[],G=[],k=0;k<f;++k){for(var A,q=n[k],z=q.length,b=0;b<z;++b){if(A=q[b]){for(var D,C=F.call(A,A.__data__,b,q),B=aE(A,a),j=0,w=C.length;j<w;++j){(D=C[j])&&aK(D,x,a,j,C,B)}E.push(C),G.push(A)}}}return new af(E,G,x,a)}function a3(){return new bg(this._groups,this._parents)}function aY(b,d){var c,a,f;return function(){var g=aw.window(this).getComputedStyle(this,null),e=g.getPropertyValue(b),h=(this.style.removeProperty(b),g.getPropertyValue(b));return e===h?null:e===c&&h===a?f:f=d(c=e,a=h)}}function aT(a){return function(){this.style.removeProperty(a)}}function aR(b,d,c){var a,f;return function(){var e=aw.window(this).getComputedStyle(this,null).getPropertyValue(b);return e===c?null:e===a?f:f=d(a=e,c)}}function aQ(c,f,d){var b,g,a;return function(){var h=aw.window(this).getComputedStyle(this,null),i=h.getPropertyValue(c),e=d(this);return null==e&&(this.style.removeProperty(c),e=h.getPropertyValue(c)),i===e?null:i===b&&e===g?a:a=f(b=i,g=e)}}function aO(a,d,c){var b="transform"==(a+="")?aB.interpolateTransformCss:ax;return null==d?this.styleTween(a,aY(a,b)).on("end.style."+a,aT(a)):this.styleTween(a,"function"==typeof d?aQ(a,b,ah(this,"style."+a,d)):aR(a,b,d),c)}function aN(a,d,c){function b(){var f=this,e=d.apply(f,arguments);return e&&function(g){f.style.setProperty(a,e(g),c)}}return b._value=d,b}function bk(a,d,c){var b="style."+(a+="");if(arguments.length<2){return(b=this.tween(b))&&b._value}if(null==d){return this.tween(b,null)}if("function"!=typeof d){throw new Error}return this.tween(b,aN(a,d,null==c?"":c))}function aV(a){return function(){this.textContent=a}}function aP(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function br(a){return this.tween("text","function"==typeof a?aP(ah(this,"text",a)):aV(null==a?"":a+""))}function bo(){for(var q=this._name,d=this._id,k=aq(),a=this._groups,g=a.length,b=0;b<g;++b){for(var p,v=a[b],f=v.length,m=0;m<f;++m){if(p=v[m]){var j=aE(p,d);aK(p,q,k,m,v,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}}}return new af(a,this._parents,q,k)}function af(a,d,c,b){this._groups=a,this._parents=d,this._name=c,this._id=b}function ak(a){return aw.selection().transition(a)}function aq(){return ++aa}function bd(a,c){for(var b;!(b=a.__transition)||!(b=b[c]);){if(!(a=a.parentNode)){return bm.time=ap.now(),bm}}return b}function bi(p){var b,j;p instanceof af?(b=p._id,p=p._name):(b=aq(),(j=bm).time=ap.now(),p=null==p?null:p+"");for(var g=this._groups,a=g.length,m=0;m<a;++m){for(var q,d=g[m],h=d.length,k=0;k<h;++k){(q=d[k])&&aK(q,p,b,k,d,j||bd(q,b))}}return new af(g,this._parents,p,b)}function bn(b,f){var d,c,a=b.__transition;if(a){f=null==f?null:f+"";for(c in a){if((d=a[c]).state>ab&&d.name===f){return new af([[b]],bp,f,+c)}}}return null}var bl=aF.dispatch("start","end","interrupt"),ae=[],aM=0,ab=1,ac=2,bq=3,ad=4,bj=5,bh=6,bg=aw.selection.prototype.constructor,aa=0,aI=aw.selection.prototype;af.prototype=ak.prototype={constructor:af,select:a5,selectAll:a4,filter:aX,merge:a6,selection:a3,transition:bo,call:aI.call,nodes:aI.nodes,node:aI.node,size:aI.size,empty:aI.empty,each:aI.each,on:a9,attr:aW,attrTween:a1,style:aO,styleTween:bk,text:br,remove:a7,tween:al,delay:aS,duration:az,ease:a2};var bm={time:null,delay:0,duration:250,ease:am.easeCubicInOut};aw.selection.prototype.interrupt=aG,aw.selection.prototype.transition=bi;var bp=[null];an.transition=ak,an.active=bn,an.interrupt=aC,Object.defineProperty(an,"__esModule",{value:!0})});